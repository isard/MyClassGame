{"filter":false,"title":"publications.js","tooltip":"/server/publications.js","undoManager":{"mark":100,"position":100,"stack":[[{"start":{"row":47,"column":13},"end":{"row":47,"column":25},"action":"remove","lines":["randomEvents"],"id":196},{"start":{"row":47,"column":13},"end":{"row":47,"column":23},"action":"insert","lines":["behaviours"]}],[{"start":{"row":52,"column":0},"end":{"row":52,"column":27},"action":"remove","lines":["  return behaviours.find();"],"id":197}],[{"start":{"row":51,"column":3},"end":{"row":52,"column":0},"action":"remove","lines":["",""],"id":198}],[{"start":{"row":53,"column":44},"end":{"row":54,"column":0},"action":"insert","lines":["",""],"id":199},{"start":{"row":54,"column":0},"end":{"row":54,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":54,"column":2},"end":{"row":62,"column":3},"action":"insert","lines":["v=[];","  var userType=Meteor.users.findOne({_id:Meteor.userId()}).userType;","  if ( userType == \"teacher\") {","      classes.find({\"teacherId\": Meteor.userId()},{fields: {'_id':1}}).forEach(function(c){v.push(c._id);});","      return behaviours.find({\"classId\": { \"$in\": v }});","  } else {","      c=Meteor.users.find({_id:Meteor.userId()}).fetch()[0].classes;","      return behaviours.find({\"classId\": { \"$in\": c }});","  }"],"id":200}],[{"start":{"row":61,"column":13},"end":{"row":61,"column":23},"action":"remove","lines":["behaviours"],"id":202},{"start":{"row":61,"column":13},"end":{"row":61,"column":26},"action":"insert","lines":["behavioursLog"]}],[{"start":{"row":58,"column":13},"end":{"row":58,"column":23},"action":"remove","lines":["behaviours"],"id":203},{"start":{"row":58,"column":13},"end":{"row":58,"column":26},"action":"insert","lines":["behavioursLog"]}],[{"start":{"row":63,"column":0},"end":{"row":63,"column":30},"action":"remove","lines":["  return behavioursLog.find();"],"id":204}],[{"start":{"row":62,"column":3},"end":{"row":63,"column":0},"action":"remove","lines":["",""],"id":205}],[{"start":{"row":67,"column":37},"end":{"row":68,"column":0},"action":"insert","lines":["",""],"id":206},{"start":{"row":68,"column":0},"end":{"row":68,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":68,"column":2},"end":{"row":76,"column":3},"action":"insert","lines":["v=[];","  var userType=Meteor.users.findOne({_id:Meteor.userId()}).userType;","  if ( userType == \"teacher\") {","      classes.find({\"teacherId\": Meteor.userId()},{fields: {'_id':1}}).forEach(function(c){v.push(c._id);});","      return students.find({\"classId\": { \"$in\": v }});","  } else {","      c=Meteor.users.find({_id:Meteor.userId()}).fetch()[0].classes;","      return students.find({\"classId\": { \"$in\": c }});","  }"],"id":207}],[{"start":{"row":79,"column":36},"end":{"row":80,"column":0},"action":"insert","lines":["",""],"id":208},{"start":{"row":80,"column":0},"end":{"row":80,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":80,"column":2},"end":{"row":88,"column":3},"action":"insert","lines":["v=[];","  var userType=Meteor.users.findOne({_id:Meteor.userId()}).userType;","  if ( userType == \"teacher\") {","      classes.find({\"teacherId\": Meteor.userId()},{fields: {'_id':1}}).forEach(function(c){v.push(c._id);});","      return students.find({\"classId\": { \"$in\": v }});","  } else {","      c=Meteor.users.find({_id:Meteor.userId()}).fetch()[0].classes;","      return students.find({\"classId\": { \"$in\": c }});","  }"],"id":209}],[{"start":{"row":91,"column":42},"end":{"row":92,"column":0},"action":"insert","lines":["",""],"id":210},{"start":{"row":92,"column":0},"end":{"row":92,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":92,"column":2},"end":{"row":100,"column":3},"action":"insert","lines":["v=[];","  var userType=Meteor.users.findOne({_id:Meteor.userId()}).userType;","  if ( userType == \"teacher\") {","      classes.find({\"teacherId\": Meteor.userId()},{fields: {'_id':1}}).forEach(function(c){v.push(c._id);});","      return students.find({\"classId\": { \"$in\": v }});","  } else {","      c=Meteor.users.find({_id:Meteor.userId()}).fetch()[0].classes;","      return students.find({\"classId\": { \"$in\": c }});","  }"],"id":211}],[{"start":{"row":103,"column":37},"end":{"row":104,"column":0},"action":"insert","lines":["",""],"id":212},{"start":{"row":104,"column":0},"end":{"row":104,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":104,"column":2},"end":{"row":112,"column":3},"action":"insert","lines":["v=[];","  var userType=Meteor.users.findOne({_id:Meteor.userId()}).userType;","  if ( userType == \"teacher\") {","      classes.find({\"teacherId\": Meteor.userId()},{fields: {'_id':1}}).forEach(function(c){v.push(c._id);});","      return students.find({\"classId\": { \"$in\": v }});","  } else {","      c=Meteor.users.find({_id:Meteor.userId()}).fetch()[0].classes;","      return students.find({\"classId\": { \"$in\": c }});","  }"],"id":213}],[{"start":{"row":115,"column":37},"end":{"row":116,"column":0},"action":"insert","lines":["",""],"id":214},{"start":{"row":116,"column":0},"end":{"row":116,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":116,"column":2},"end":{"row":124,"column":3},"action":"insert","lines":["v=[];","  var userType=Meteor.users.findOne({_id:Meteor.userId()}).userType;","  if ( userType == \"teacher\") {","      classes.find({\"teacherId\": Meteor.userId()},{fields: {'_id':1}}).forEach(function(c){v.push(c._id);});","      return students.find({\"classId\": { \"$in\": v }});","  } else {","      c=Meteor.users.find({_id:Meteor.userId()}).fetch()[0].classes;","      return students.find({\"classId\": { \"$in\": c }});","  }"],"id":215}],[{"start":{"row":127,"column":41},"end":{"row":128,"column":0},"action":"insert","lines":["",""],"id":216},{"start":{"row":128,"column":0},"end":{"row":128,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":128,"column":2},"end":{"row":136,"column":3},"action":"insert","lines":["v=[];","  var userType=Meteor.users.findOne({_id:Meteor.userId()}).userType;","  if ( userType == \"teacher\") {","      classes.find({\"teacherId\": Meteor.userId()},{fields: {'_id':1}}).forEach(function(c){v.push(c._id);});","      return students.find({\"classId\": { \"$in\": v }});","  } else {","      c=Meteor.users.find({_id:Meteor.userId()}).fetch()[0].classes;","      return students.find({\"classId\": { \"$in\": c }});","  }"],"id":217}],[{"start":{"row":139,"column":43},"end":{"row":140,"column":0},"action":"insert","lines":["",""],"id":218},{"start":{"row":140,"column":0},"end":{"row":140,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":140,"column":2},"end":{"row":148,"column":3},"action":"insert","lines":["v=[];","  var userType=Meteor.users.findOne({_id:Meteor.userId()}).userType;","  if ( userType == \"teacher\") {","      classes.find({\"teacherId\": Meteor.userId()},{fields: {'_id':1}}).forEach(function(c){v.push(c._id);});","      return students.find({\"classId\": { \"$in\": v }});","  } else {","      c=Meteor.users.find({_id:Meteor.userId()}).fetch()[0].classes;","      return students.find({\"classId\": { \"$in\": c }});","  }"],"id":219}],[{"start":{"row":151,"column":41},"end":{"row":152,"column":0},"action":"insert","lines":["",""],"id":220},{"start":{"row":152,"column":0},"end":{"row":152,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":152,"column":2},"end":{"row":160,"column":3},"action":"insert","lines":["v=[];","  var userType=Meteor.users.findOne({_id:Meteor.userId()}).userType;","  if ( userType == \"teacher\") {","      classes.find({\"teacherId\": Meteor.userId()},{fields: {'_id':1}}).forEach(function(c){v.push(c._id);});","      return students.find({\"classId\": { \"$in\": v }});","  } else {","      c=Meteor.users.find({_id:Meteor.userId()}).fetch()[0].classes;","      return students.find({\"classId\": { \"$in\": c }});","  }"],"id":221}],[{"start":{"row":163,"column":43},"end":{"row":164,"column":0},"action":"insert","lines":["",""],"id":222},{"start":{"row":164,"column":0},"end":{"row":164,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":164,"column":2},"end":{"row":172,"column":3},"action":"insert","lines":["v=[];","  var userType=Meteor.users.findOne({_id:Meteor.userId()}).userType;","  if ( userType == \"teacher\") {","      classes.find({\"teacherId\": Meteor.userId()},{fields: {'_id':1}}).forEach(function(c){v.push(c._id);});","      return students.find({\"classId\": { \"$in\": v }});","  } else {","      c=Meteor.users.find({_id:Meteor.userId()}).fetch()[0].classes;","      return students.find({\"classId\": { \"$in\": c }});","  }"],"id":223}],[{"start":{"row":175,"column":36},"end":{"row":176,"column":0},"action":"insert","lines":["",""],"id":224},{"start":{"row":176,"column":0},"end":{"row":176,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":176,"column":2},"end":{"row":184,"column":3},"action":"insert","lines":["v=[];","  var userType=Meteor.users.findOne({_id:Meteor.userId()}).userType;","  if ( userType == \"teacher\") {","      classes.find({\"teacherId\": Meteor.userId()},{fields: {'_id':1}}).forEach(function(c){v.push(c._id);});","      return students.find({\"classId\": { \"$in\": v }});","  } else {","      c=Meteor.users.find({_id:Meteor.userId()}).fetch()[0].classes;","      return students.find({\"classId\": { \"$in\": c }});","  }"],"id":225}],[{"start":{"row":187,"column":39},"end":{"row":188,"column":0},"action":"insert","lines":["",""],"id":226},{"start":{"row":188,"column":0},"end":{"row":188,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":188,"column":2},"end":{"row":196,"column":3},"action":"insert","lines":["v=[];","  var userType=Meteor.users.findOne({_id:Meteor.userId()}).userType;","  if ( userType == \"teacher\") {","      classes.find({\"teacherId\": Meteor.userId()},{fields: {'_id':1}}).forEach(function(c){v.push(c._id);});","      return students.find({\"classId\": { \"$in\": v }});","  } else {","      c=Meteor.users.find({_id:Meteor.userId()}).fetch()[0].classes;","      return students.find({\"classId\": { \"$in\": c }});","  }"],"id":227}],[{"start":{"row":199,"column":43},"end":{"row":200,"column":0},"action":"insert","lines":["",""],"id":228},{"start":{"row":200,"column":0},"end":{"row":200,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":200,"column":2},"end":{"row":208,"column":3},"action":"insert","lines":["v=[];","  var userType=Meteor.users.findOne({_id:Meteor.userId()}).userType;","  if ( userType == \"teacher\") {","      classes.find({\"teacherId\": Meteor.userId()},{fields: {'_id':1}}).forEach(function(c){v.push(c._id);});","      return students.find({\"classId\": { \"$in\": v }});","  } else {","      c=Meteor.users.find({_id:Meteor.userId()}).fetch()[0].classes;","      return students.find({\"classId\": { \"$in\": c }});","  }"],"id":229}],[{"start":{"row":211,"column":37},"end":{"row":212,"column":0},"action":"insert","lines":["",""],"id":230},{"start":{"row":212,"column":0},"end":{"row":212,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":212,"column":2},"end":{"row":220,"column":3},"action":"insert","lines":["v=[];","  var userType=Meteor.users.findOne({_id:Meteor.userId()}).userType;","  if ( userType == \"teacher\") {","      classes.find({\"teacherId\": Meteor.userId()},{fields: {'_id':1}}).forEach(function(c){v.push(c._id);});","      return students.find({\"classId\": { \"$in\": v }});","  } else {","      c=Meteor.users.find({_id:Meteor.userId()}).fetch()[0].classes;","      return students.find({\"classId\": { \"$in\": c }});","  }"],"id":231}],[{"start":{"row":223,"column":36},"end":{"row":224,"column":0},"action":"insert","lines":["",""],"id":232},{"start":{"row":224,"column":0},"end":{"row":224,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":224,"column":2},"end":{"row":232,"column":3},"action":"insert","lines":["v=[];","  var userType=Meteor.users.findOne({_id:Meteor.userId()}).userType;","  if ( userType == \"teacher\") {","      classes.find({\"teacherId\": Meteor.userId()},{fields: {'_id':1}}).forEach(function(c){v.push(c._id);});","      return students.find({\"classId\": { \"$in\": v }});","  } else {","      c=Meteor.users.find({_id:Meteor.userId()}).fetch()[0].classes;","      return students.find({\"classId\": { \"$in\": c }});","  }"],"id":233}],[{"start":{"row":235,"column":40},"end":{"row":236,"column":0},"action":"insert","lines":["",""],"id":234},{"start":{"row":236,"column":0},"end":{"row":236,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":236,"column":2},"end":{"row":244,"column":3},"action":"insert","lines":["v=[];","  var userType=Meteor.users.findOne({_id:Meteor.userId()}).userType;","  if ( userType == \"teacher\") {","      classes.find({\"teacherId\": Meteor.userId()},{fields: {'_id':1}}).forEach(function(c){v.push(c._id);});","      return students.find({\"classId\": { \"$in\": v }});","  } else {","      c=Meteor.users.find({_id:Meteor.userId()}).fetch()[0].classes;","      return students.find({\"classId\": { \"$in\": c }});","  }"],"id":235}],[{"start":{"row":247,"column":43},"end":{"row":248,"column":0},"action":"insert","lines":["",""],"id":236},{"start":{"row":248,"column":0},"end":{"row":248,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":248,"column":2},"end":{"row":256,"column":3},"action":"insert","lines":["v=[];","  var userType=Meteor.users.findOne({_id:Meteor.userId()}).userType;","  if ( userType == \"teacher\") {","      classes.find({\"teacherId\": Meteor.userId()},{fields: {'_id':1}}).forEach(function(c){v.push(c._id);});","      return students.find({\"classId\": { \"$in\": v }});","  } else {","      c=Meteor.users.find({_id:Meteor.userId()}).fetch()[0].classes;","      return students.find({\"classId\": { \"$in\": c }});","  }"],"id":237}],[{"start":{"row":75,"column":13},"end":{"row":75,"column":21},"action":"remove","lines":["students"],"id":238},{"start":{"row":75,"column":13},"end":{"row":75,"column":19},"action":"insert","lines":["badges"]}],[{"start":{"row":72,"column":13},"end":{"row":72,"column":21},"action":"remove","lines":["students"],"id":239},{"start":{"row":72,"column":13},"end":{"row":72,"column":19},"action":"insert","lines":["badges"]}],[{"start":{"row":77,"column":0},"end":{"row":77,"column":23},"action":"remove","lines":["  return badges.find();"],"id":240}],[{"start":{"row":76,"column":3},"end":{"row":77,"column":0},"action":"remove","lines":["",""],"id":241}],[{"start":{"row":86,"column":13},"end":{"row":86,"column":21},"action":"remove","lines":["students"],"id":242},{"start":{"row":86,"column":13},"end":{"row":86,"column":18},"action":"insert","lines":["store"]}],[{"start":{"row":83,"column":13},"end":{"row":83,"column":21},"action":"remove","lines":["students"],"id":243},{"start":{"row":83,"column":13},"end":{"row":83,"column":18},"action":"insert","lines":["store"]}],[{"start":{"row":88,"column":0},"end":{"row":88,"column":22},"action":"remove","lines":["  return store.find();"],"id":244}],[{"start":{"row":87,"column":3},"end":{"row":88,"column":0},"action":"remove","lines":["",""],"id":245}],[{"start":{"row":97,"column":13},"end":{"row":97,"column":21},"action":"remove","lines":["students"],"id":246},{"start":{"row":97,"column":13},"end":{"row":97,"column":24},"action":"insert","lines":["convictions"]}],[{"start":{"row":94,"column":13},"end":{"row":94,"column":21},"action":"remove","lines":["students"],"id":247},{"start":{"row":94,"column":13},"end":{"row":94,"column":24},"action":"insert","lines":["convictions"]}],[{"start":{"row":99,"column":0},"end":{"row":99,"column":28},"action":"remove","lines":["  return convictions.find();"],"id":248}],[{"start":{"row":98,"column":3},"end":{"row":99,"column":0},"action":"remove","lines":["",""],"id":249}],[{"start":{"row":108,"column":13},"end":{"row":108,"column":21},"action":"remove","lines":["students"],"id":250},{"start":{"row":108,"column":13},"end":{"row":108,"column":19},"action":"insert","lines":["quotes"]}],[{"start":{"row":105,"column":13},"end":{"row":105,"column":21},"action":"remove","lines":["students"],"id":251},{"start":{"row":105,"column":13},"end":{"row":105,"column":19},"action":"insert","lines":["quotes"]}],[{"start":{"row":110,"column":0},"end":{"row":110,"column":23},"action":"remove","lines":["  return quotes.find();"],"id":252}],[{"start":{"row":109,"column":3},"end":{"row":110,"column":0},"action":"remove","lines":["",""],"id":253}],[{"start":{"row":119,"column":13},"end":{"row":119,"column":21},"action":"remove","lines":["students"],"id":254},{"start":{"row":119,"column":13},"end":{"row":119,"column":19},"action":"insert","lines":["levels"]}],[{"start":{"row":116,"column":13},"end":{"row":116,"column":21},"action":"remove","lines":["students"],"id":255},{"start":{"row":116,"column":13},"end":{"row":116,"column":19},"action":"insert","lines":["levels"]}],[{"start":{"row":121,"column":0},"end":{"row":121,"column":23},"action":"remove","lines":["  return levels.find();"],"id":256}],[{"start":{"row":120,"column":3},"end":{"row":121,"column":0},"action":"remove","lines":["",""],"id":257}],[{"start":{"row":130,"column":13},"end":{"row":130,"column":21},"action":"remove","lines":["students"],"id":258},{"start":{"row":130,"column":13},"end":{"row":130,"column":23},"action":"insert","lines":["challenges"]}],[{"start":{"row":127,"column":13},"end":{"row":127,"column":21},"action":"remove","lines":["students"],"id":259},{"start":{"row":127,"column":13},"end":{"row":127,"column":23},"action":"insert","lines":["challenges"]}],[{"start":{"row":132,"column":0},"end":{"row":132,"column":27},"action":"remove","lines":["  return challenges.find();"],"id":260}],[{"start":{"row":131,"column":3},"end":{"row":132,"column":0},"action":"remove","lines":["",""],"id":261}],[{"start":{"row":141,"column":13},"end":{"row":141,"column":21},"action":"remove","lines":["students"],"id":262},{"start":{"row":141,"column":13},"end":{"row":141,"column":25},"action":"insert","lines":["chalMissions"]}],[{"start":{"row":138,"column":13},"end":{"row":138,"column":21},"action":"remove","lines":["students"],"id":263},{"start":{"row":138,"column":13},"end":{"row":138,"column":25},"action":"insert","lines":["chalMissions"]}],[{"start":{"row":143,"column":0},"end":{"row":143,"column":29},"action":"remove","lines":["  return chalMissions.find();"],"id":264}],[{"start":{"row":142,"column":3},"end":{"row":143,"column":0},"action":"remove","lines":["",""],"id":265}],[{"start":{"row":152,"column":13},"end":{"row":152,"column":21},"action":"remove","lines":["students"],"id":266},{"start":{"row":152,"column":13},"end":{"row":152,"column":23},"action":"insert","lines":["chalPoints"]}],[{"start":{"row":149,"column":13},"end":{"row":149,"column":21},"action":"remove","lines":["students"],"id":267},{"start":{"row":149,"column":13},"end":{"row":149,"column":23},"action":"insert","lines":["chalPoints"]}],[{"start":{"row":154,"column":0},"end":{"row":154,"column":27},"action":"remove","lines":["  return chalPoints.find();"],"id":268}],[{"start":{"row":153,"column":3},"end":{"row":154,"column":0},"action":"remove","lines":["",""],"id":269}],[{"start":{"row":163,"column":13},"end":{"row":163,"column":21},"action":"remove","lines":["students"],"id":270},{"start":{"row":163,"column":13},"end":{"row":163,"column":25},"action":"insert","lines":["challengesXP"]}],[{"start":{"row":160,"column":13},"end":{"row":160,"column":21},"action":"remove","lines":["students"],"id":271},{"start":{"row":160,"column":13},"end":{"row":160,"column":25},"action":"insert","lines":["challengesXP"]}],[{"start":{"row":165,"column":0},"end":{"row":165,"column":29},"action":"remove","lines":["  return challengesXP.find();"],"id":272}],[{"start":{"row":164,"column":3},"end":{"row":165,"column":0},"action":"remove","lines":["",""],"id":273}],[{"start":{"row":174,"column":13},"end":{"row":174,"column":21},"action":"remove","lines":["students"],"id":274},{"start":{"row":174,"column":13},"end":{"row":174,"column":18},"action":"insert","lines":["diary"]}],[{"start":{"row":171,"column":13},"end":{"row":171,"column":21},"action":"remove","lines":["students"],"id":275},{"start":{"row":171,"column":13},"end":{"row":171,"column":18},"action":"insert","lines":["diary"]}],[{"start":{"row":176,"column":0},"end":{"row":176,"column":22},"action":"remove","lines":["  return diary.find();"],"id":276}],[{"start":{"row":175,"column":3},"end":{"row":176,"column":0},"action":"remove","lines":["",""],"id":277}],[{"start":{"row":185,"column":13},"end":{"row":185,"column":21},"action":"remove","lines":["students"],"id":278},{"start":{"row":185,"column":13},"end":{"row":185,"column":21},"action":"insert","lines":["notebook"]}],[{"start":{"row":182,"column":13},"end":{"row":182,"column":21},"action":"remove","lines":["students"],"id":279},{"start":{"row":182,"column":13},"end":{"row":182,"column":21},"action":"insert","lines":["notebook"]}],[{"start":{"row":187,"column":0},"end":{"row":187,"column":25},"action":"remove","lines":["  return notebook.find();"],"id":280}],[{"start":{"row":186,"column":3},"end":{"row":187,"column":0},"action":"remove","lines":["",""],"id":281}],[{"start":{"row":196,"column":13},"end":{"row":196,"column":21},"action":"remove","lines":["students"],"id":282},{"start":{"row":196,"column":13},"end":{"row":196,"column":25},"action":"insert","lines":["notebookWork"]}],[{"start":{"row":193,"column":13},"end":{"row":193,"column":21},"action":"remove","lines":["students"],"id":283},{"start":{"row":193,"column":13},"end":{"row":193,"column":25},"action":"insert","lines":["notebookWork"]}],[{"start":{"row":198,"column":0},"end":{"row":198,"column":29},"action":"remove","lines":["  return notebookWork.find();"],"id":284}],[{"start":{"row":197,"column":3},"end":{"row":198,"column":0},"action":"remove","lines":["",""],"id":285}],[{"start":{"row":207,"column":13},"end":{"row":207,"column":21},"action":"remove","lines":["students"],"id":286},{"start":{"row":207,"column":13},"end":{"row":207,"column":19},"action":"insert","lines":["images"]}],[{"start":{"row":204,"column":13},"end":{"row":204,"column":21},"action":"remove","lines":["students"],"id":287},{"start":{"row":204,"column":13},"end":{"row":204,"column":19},"action":"insert","lines":["images"]}],[{"start":{"row":209,"column":0},"end":{"row":209,"column":23},"action":"remove","lines":["  return images.find();"],"id":288}],[{"start":{"row":208,"column":3},"end":{"row":209,"column":0},"action":"remove","lines":["",""],"id":289}],[{"start":{"row":218,"column":13},"end":{"row":218,"column":21},"action":"remove","lines":["students"],"id":290},{"start":{"row":218,"column":13},"end":{"row":218,"column":18},"action":"insert","lines":["cards"]}],[{"start":{"row":215,"column":13},"end":{"row":215,"column":21},"action":"remove","lines":["students"],"id":291},{"start":{"row":215,"column":13},"end":{"row":215,"column":18},"action":"insert","lines":["cards"]}],[{"start":{"row":220,"column":0},"end":{"row":220,"column":22},"action":"remove","lines":["  return cards.find();"],"id":292}],[{"start":{"row":219,"column":3},"end":{"row":220,"column":0},"action":"remove","lines":["",""],"id":293}],[{"start":{"row":229,"column":13},"end":{"row":229,"column":21},"action":"remove","lines":["students"],"id":294},{"start":{"row":229,"column":13},"end":{"row":229,"column":22},"action":"insert","lines":["chatClass"]}],[{"start":{"row":226,"column":13},"end":{"row":226,"column":21},"action":"remove","lines":["students"],"id":295},{"start":{"row":226,"column":13},"end":{"row":226,"column":22},"action":"insert","lines":["chatClass"]}],[{"start":{"row":234,"column":0},"end":{"row":242,"column":3},"action":"remove","lines":["  v=[];","  var userType=Meteor.users.findOne({_id:Meteor.userId()}).userType;","  if ( userType == \"teacher\") {","      classes.find({\"teacherId\": Meteor.userId()},{fields: {'_id':1}}).forEach(function(c){v.push(c._id);});","      return students.find({\"classId\": { \"$in\": v }});","  } else {","      c=Meteor.users.find({_id:Meteor.userId()}).fetch()[0].classes;","      return students.find({\"classId\": { \"$in\": c }});","  }"],"id":296}],[{"start":{"row":233,"column":43},"end":{"row":234,"column":0},"action":"remove","lines":["",""],"id":297}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":233,"column":43},"end":{"row":233,"column":43},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1552406513049,"hash":"9c6e64ddf5806f24c28549c0aa98458e78e88335"}