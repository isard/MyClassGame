<template name="missions">
  <!--<h3 class="nameSection">Misiones</h3>-->
  <div class="missionsBtns text-center">
    <span class="btn btn-info allMissions">MISIONES <i class="fas fa-th"></i></span>
    {{#each challenge}}
      <span class="btn btn-info oneMission">M{{order}}</span>
    {{/each}}
  </div>
  {{> scheduler}}
  <div class="container-fluid" id="missionsPage">
    <!-- <a href="#" onClick="renderWidget();">Render the Classroom share button</a>
    <div id="widget-div"></div> -->
    <!--<h4><g:sharetoclassroom size=32 url="https://google.com"></g:sharetoclassroom> <span style="vertical-align:10px;">Google Classroom</span></h4>
    {{> GCTasks}}-->
    <div class="row">
      {{> missionCardCreate}}
      {{#each challenge}}
        {{> missionCard2Template}}
      {{/each}}
    </div>
  </div>
  <div class="oculto" id="missionPage">
    <!--
    <div id="missionId">
      <svg height="5000" width="400">
        <line x1="100" y1="100" x2="200" y2="300" style="stroke:rgb(255,0,0);stroke-width:2" />
      </svg>
      <p class="missionP" id="missionP1">p1</p>
      <p class="missionP" id="missionP2">p2</p>
    </div>-->
    {{> mission}}
  </div>
</template>

<template name="mission">
  <div class="container-fluid float-up">
    {{#with mission}}
      <div class="form-group">
        <div class="input-group col-xs-12">
          <label for="chalName">Nombre misión {{IoG}}</label>
          <input type="text" class="form-control inputGroup chalName" name="chalName" {{teacher}} aria-describedby="inputGroupSuccess1Status" value="{{chalName}}">
        </div>
        <div class="input-group col-xs-12">
          <label for="chalDesc">Descripción</label>
          <textarea class="form-control chalDesc" name="chalDesc" {{teacher}} rows="3">{{chalDesc}}</textarea>
        </div>
        <div class="input-group mb-3">
          <input type="checkbox" class="nbDepCheck" name="nbDepCheck" {{disTeacher}} checked={{notebookDependence}}>
          <label for="nbDepCheck"> Notas dependen del cuaderno de grupo</label>
        </div>
        {{#if isTeacher}}
          <div class="input-group mb-3">
            <button class="duplicarMision btn btn-info" name="duplicarMision">Duplicar</button>
            <!--<button class="notas btn btn-info" name="{{_id}}">Introducir Notas</button>-->
            <button class="btn btn-info chalDel" name="chalDel">Eliminar</button>
            <label for="nbDepCheck"> Color </label> <!--<input class="btn missionColor" type="color" value="{{missionColor}}">-->
            <input type="color" value="{{missionColor}}" class="colorpicker missionColor">
          </div>
        {{/if}}
        <div class="input-group col-xs-12">
          <div class="panel panel-info" id="{{_id}}">
            <div class="panel-heading">Tareas</div>
            <div class="panel-body panelChal">
              {{#each chalMissions _id}}
                <div class="input-group">
                  <div class="input-group-addon">
                    <span class="input-group-text">Tarea {{order}}</span>
                  </div>
                  <input id="cmd{{_id}}" type="text" class="form-control" {{teacher}} name="chalName" placeholder="Tarea" aria-label="Tarea" aria-describedby="basic-addon1" value="{{chalMissionDesc}}">
                  <div class="input-group-addon">
                    <span class="input-group-text">XP</span>
                  </div>
                  <input id="cmxp{{_id}}" type="text" class="form-control" {{teacher}} name="chalXP" placeholder="XP" aria-label="XP" aria-describedby="basic-addon1" value="{{chalMissionXP}}">
                  {{#if isTeacher}}
                  <div class="input-group-addon">
                    <span class="glyphicon glyphicon-ok-circle chalMissionUpdate" aria-hidden="true"></span>
                    <span class="glyphicon glyphicon-th-list chalMissionRub" aria-hidden="true"></span>
                    <span class="glyphicon glyphicon-education chalMissionGrades" aria-hidden="true"></span>
                    <span class="glyphicon glyphicon-circle-arrow-up chalMissionUp" aria-hidden="true"></span>
                    <span class="glyphicon glyphicon-circle-arrow-down chalMissionDown" aria-hidden="true"></span>
                    <span class="glyphicon glyphicon-remove-circle chalMissionDel" aria-hidden="true"></span>
                  </div>
                  {{/if}}
                </div>
                <div class="oculto" id="rubrica{{_id}}">
                  <div class="input-group col-xs-12">
                    <label>Descripción</label>
                    <textarea class="form-control descTask" id="desc{{_id}}" {{teacher}} rows="3">{{descTask}}</textarea>
                  </div>
                  <div id="studentsPoints">
                    <label>Rúbrica</label>
                    <div class="btn-group btn-group-toggle btn-group-justified" data-toggle="buttons">
                      <label class="btn btn-info btn-emoticon">
                        <img class="emoticon" src="https://res.cloudinary.com/myclassgame/image/upload/v1549277040/images/star_red.png"/>
                        <textarea class="form-control rubricaText r1" {{teacher}} rows="3">{{r1}}</textarea>
                      </label>
                      <label class="btn btn-info btn-emoticon">
                        <img class="emoticon" src="https://res.cloudinary.com/myclassgame/image/upload/v1549277039/images/star_orange.png"/>
                        <textarea class="form-control rubricaText r2" {{teacher}} rows="3">{{r2}}</textarea>
                      </label>
                      <label class="btn btn-info btn-emoticon">
                        <img class="emoticon" src="https://res.cloudinary.com/myclassgame/image/upload/v1549277040/images/star_yellow.png"/>
                        <textarea class="form-control rubricaText r3" {{teacher}} rows="3">{{r3}}</textarea>
                      </label>
                      <label class="btn btn-info btn-emoticon">
                        <img class="emoticon" src="https://res.cloudinary.com/myclassgame/image/upload/v1549277040/images/star_white.png"/>
                        <textarea class="form-control rubricaText r4" {{teacher}} rows="3">{{r4}}</textarea>
                      </label>
                      <label class="btn btn-info btn-emoticon">
                        <img class="emoticon" src="https://res.cloudinary.com/myclassgame/image/upload/v1549277083/images/star_blue.png"/>
                        <textarea class="form-control rubricaText r5" {{teacher}} rows="3">{{r5}}</textarea>
                      </label>
                      <label class="btn btn-info btn-emoticon">
                        <img class="emoticon" src="https://res.cloudinary.com/myclassgame/image/upload/v1549277035/images/star_green.png"/>
                        <textarea class="form-control rubricaText r6" {{teacher}} rows="3">{{r6}}</textarea>
                      </label>
                    </div>
                    <div class="input-group col-xs-12">
                      <button class="btn btn-info drive" {{teacher}}>Seleccionar fichero Drive</button>
                      <a class="btn btn-info" href="https://drive.google.com/open?id={{drive}}" target="_blank" {{teacher}}>Ver fichero</a>
                    </div>
                  </div>
                </div>
              {{/each}}
              <div><button class="btn btn-info schedulerBtn">Calendario</button></div>
              <div class='input-group date datetimepicker'>
                  <input type='text' class="form-control" />
                  <span class="input-group-addon">
                      <span class="glyphicon glyphicon-calendar"></span>
                  </span>
              </div>
              {{> taskCardCreateTemplate}}
              {{#each chalMissions _id}}
                {{> taskCardTemplate}}
              {{/each}}
            </div>
            {{#if isTeacher}}
              <div class="panel-footer">
                <div class="input-group">
                  <div class="input-group-addon">
                    <span class="input-group-text">Nueva</span>
                  </div>
                  <input type="text" class="form-control" placeholder="Tarea" id="chalMissionDesc{{_id}}">
                  <div class="input-group-addon">
                    <span class="input-group-text"></span>
                  </div>
                  <input type="text" class="form-control" placeholder="XP" id="chalMissionXP{{_id}}">
                  <div class="input-group-addon">
                    <span class="glyphicon glyphicon-ok-circle chalSave" aria-hidden="true"></span>
                  </div>
                </div>
              </div>
            {{/if}}
          </div>
        </div>
      </div>
    {{/with}}
  </div>
</template>

<template name="deleteMission">
  <div class="modal" id="add_class_modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <form id="add_class_form">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="exampleModalLabel">Borrar misión</h4>
          </div>
          <div class="jumbotron jumbotron-fluid">
            <div class="container">
              <h1 class="display-4">Borrar misión</h1>
              <p class="lead">¿Estás seguro de borrar la misión?</p>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
            <input type="submit" class="btn btn-primary" value="Borrar">
          </div>
        </form>
      </div>
    </div>
  </div>
</template>
