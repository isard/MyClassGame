<template name="challenges">
  <div class="container">
    <div class="list-group">
      {{#with class}}
        <div class="panel panel-info">
          <div class="panel-heading" role="button" data-toggle="collapse" data-parent="" href="#adventure" aria-expanded="true" aria-controls="adventure" id="headAdventure">
            <h4 class="panel-title">
              Aventura
            </h4>
          </div>
          <div id="adventure" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headAdventure">
            <div class="panel-body">
              <div class="form-group">
                <div class="input-group col-xs-12">
                  <label for="chalDesc">Nombre aventura</label>
                  <input type="text" id="adventureName" class="form-control inputGroup" {{teacher}} aria-describedby="inputGroupSuccess1Status" value="{{adventureName}}">
                </div>
                <div class="input-group col-xs-12">
                  <label for="chalDesc">Descripción</label>
                  <textarea class="form-control" id="adventureDesc" {{teacher}} rows="3">{{adventureDesc}}</textarea>
                </div>
                <div class="input-group col-xs-12">
                  <label for="chalDesc">Web sobre la aventura</label>
                  <input type="text" class="form-control inputGroup" id="adventureWeb" {{teacher}} aria-describedby="inputGroupSuccess1Status" value="{{adventureWeb}}">
                </div>
                
                <div class="input-group mb-3">
                  {{#if adventureWeb}}
                    <a class="btn btn-info" href="{{adventureWeb}}" target="_blank">Visitar web</a>
                    <button id="embebido" value="Mostrar" class="btn btn-info">Mostrar</button>
                  {{/if}}
                  {{#if isTeacher}}
                    <button id="saveAdventure" value="Guardar" class="btn btn-info">Guardar</button>
                  {{/if}}
                </div>
                {{#if adventureWeb}}
                <div class="input-group col-xs-12" id="iframeWeb">
                  <div style="width: 100%;"><div style="position: relative; padding-bottom: 56.25%; padding-top: 0; height: 0;"><iframe frameborder="0" width="1200px" height="675px" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;" src="{{adventureWeb}}" type="text/html" allowscriptaccess="always" allowfullscreen="true" scrolling="yes" allownetworking="all"></iframe> </div> </div>
                </div>
                {{/if}}
              </div>
            </div>
          </div>
        </div>
      {{/with}}
      <div class="panel panel-info">
        <div class="panel-heading" role="button" data-toggle="collapse" data-parent="" href="#missions" aria-expanded="true" aria-controls="missions" id="headMissions">
          <h4 class="panel-title">
            Misiones
          </h4>
        </div>
        <div id="missions" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headMissions">
          <div class="panel-body">
            <div class="form-group has-info">
              <label class="control-label" for="inputGroupSuccess1">Misiones</label>
              <div class="panel-group" id="accordionMissions" role="tablist" aria-multiselectable="true">
                {{#each challenge}}
                  <div class="panel panel-info">
                    <div class="panel-heading" role="button" data-toggle="collapse" data-parent="#accordionMissions" href="#collapse{{_id}}" aria-expanded="false" aria-controls="collapse{{_id}}" id="heading{{_id}}">
                      <h4 class="panel-title">
                        Misión {{IoG}}: {{chalName}}
                      </h4>
                    </div>
                    <div id="collapse{{_id}}" class="panel-collapse collapse" role="tabpanel" aria-labelledby="heading{{_id}}">
                      <div class="panel-body">
                        <div class="form-group">
                          <div class="input-group col-xs-12">
                            <label for="chalDesc">Nombre misión {{IoG}}</label>
                            <input type="text" class="form-control inputGroup" name="{{_id}}" id="chalName" {{teacher}} aria-describedby="inputGroupSuccess1Status" value="{{chalName}}">
                          </div>
                          <div class="input-group col-xs-12">
                            <label for="chalDesc">Descripción</label>
                            <textarea class="form-control" name="{{_id}}" id="chalDesc" {{teacher}} rows="3">{{chalDesc}}</textarea>
                          </div>
                          <div class="input-group mb-3">
                            <input type="checkbox" id="nbDepCheck" name={{_id}} {{disTeacher}} checked={{notebookDependence}}>
                            <label for="nbDepCheck"> Notas dependen del cuaderno de grupo</label>
                          </div>
                          {{#if isTeacher}}
                            <div class="input-group mb-3">
                              <button class="notas btn btn-info" name="{{_id}}">Introducir Notas</button>
                              <button class="btn btn-info" name="{{_id}}" id="chalDel">Eliminar</button>
                            </div>
                          {{/if}}
                          <div class="input-group col-xs-12">
                            <div class="panel panel-info" id="{{_id}}">
                              <div class="panel-heading">Retos</div>
                              <div class="panel-body panelChal">
                                {{#each chalMissions _id}}
                                  <div class="input-group bg-info">
                                    <div class="input-group-addon">
                                      <span class="input-group-text">Reto {{order}}</span>
                                    </div>
                                    <input id="cmd{{_id}}" type="text" class="form-control" {{teacher}} name="chalName" placeholder="Reto" aria-label="Reto" aria-describedby="basic-addon1" value="{{chalMissionDesc}}">
                                    <div class="input-group-addon">
                                      <span class="input-group-text">XP</span>
                                    </div>
                                    <input id="cmxp{{_id}}" type="text" class="form-control" {{teacher}} name="chalXP" placeholder="XP" aria-label="XP" aria-describedby="basic-addon1" value="{{chalMissionXP}}">
                                    {{#if isTeacher}}
                                      <div class="input-group-btn">
                                        <button class="btn btn-info chalMissionUpdate" type="button"><span class="glyphicon glyphicon-ok-circle" aria-hidden="true"></span></button>
                                        <button class="btn btn-info chalMissionDel" type="button"><span class="glyphicon glyphicon-remove-circle" aria-hidden="true"></span></button>
                                        <button class="btn btn-info chalMissionUp" type="button"><span class="glyphicon glyphicon-circle-arrow-up" aria-hidden="true"></span></button>
                                        <button class="btn btn-info chalMissionDown" type="button"><span class="glyphicon glyphicon-circle-arrow-down" aria-hidden="true"></span></button>
                                      </div>
                                    {{/if}}
                                  </div>
                                {{/each}}
                              </div>
                              {{#if isTeacher}}
                                <div class="panel-footer">
                                  <div class="input-group">
                                    <div class="input-group-addon">
                                      <span class="input-group-text">Nuevo</span>
                                    </div>
                                    <input type="text" class="form-control" placeholder="Reto" id="chalMissionDesc{{_id}}">
                                    <div class="input-group-addon">
                                      <span class="input-group-text"></span>
                                    </div>
                                    <input type="text" class="form-control" placeholder="XP" id="chalMissionXP{{_id}}">
                                    <div class="input-group-btn">
                                      <button class="btn btn-info chalSave" id="{{_id}}" type="button"><span class="glyphicon glyphicon-ok-circle chalSave" aria-hidden="true"></span></button>
                                    </div>
                                  </div>
                                </div>  
                              {{/if}}
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                {{/each}}
              </div>
            </div>
            {{#if isTeacher}}
              <form>
                <div class="form-group">
                  <label class="control-label" for="inputGroupSuccess1">Crear misión</label>
                  
                  <!--
                  <div class="input-group mb-3">
                    <div class="input-group-addon">
                      <span class="input-group-text">Misión o Reto</span>
                    </div> 
                    <select class="custom-select form-control" id="selectMoC" name="MoC">
                      <option value="Misión">Misión</option>
                      <option value="Reto">Reto</option>
                    </select>
                  </div>
                  -->
                  
                  <div class="input-group  mb-3">
                    <div class="input-group-addon">
                      <span class="input-group-text" id="basic-addon1">Nombre</span>
                    </div>
                    <input type="text" class="form-control" name="chalName" placeholder="Nombre del reto" aria-label="Nombre del reto" aria-describedby="basic-addon1">
                  </div>
                  
                  <div class="input-group mb-3">
                    <div class="input-group-addon">
                      <span class="input-group-text" id="basic-addon2">Descripción</span>
                    </div> 
                    <input type="text" class="form-control" name="chalDesc" placeholder="Descripción del reto" aria-label="Descripción del reto" aria-describedby="basic-addon2">
                  </div>
                  
                  <div class="input-group mb-3">
                    <div class="input-group-addon">
                      <span class="input-group-text">Tipo</span>
                    </div> 
                    <select class="custom-select form-control" id="selectIoG" name="IoG">
                      <option value="Grupal">Grupal</option>
                      <option value="Individual">Individual</option>
                    </select>
                  </div>
                  
                  <div class="input-group mb-3">
                    <input type="checkbox" id="notebookCheck" name="notebookCheck" checked={{notebookDependence}}>
                    <label class="control-label" for="notebookCheck"> Notas dependen del cuaderno de grupo</label>
                  </div>
                  
                  <div class="input-group mb-3">
                    <input type="submit" id="btn-save" value="Crear" class="btn btn-info">
                  </div>
                </div>
              </form>
            {{/if}}
          </div>
        </div>
      </div>
    </div>
 
  </div>
</template>

